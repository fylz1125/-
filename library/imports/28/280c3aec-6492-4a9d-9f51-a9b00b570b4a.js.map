{"version":3,"sources":["../../../../assets/Script/assets/Script/HelloWorld.js"],"names":["cc","Class","extends","Component","properties","label","default","type","Label","text","onLoad","string","__initCfg","posX","posY","ratioVal","radiusVal","szBack","szFont","RubCardLayer_State_Move","RubCardLayer_State_Smooth","RubCardLayer_Pai","RubCardLayer_RotationFrame","RubCardLayer_RotationAnger","RubCardLayer_SmoothFrame","RubCardLayer_SmoothAnger","state","__createTextures","__initTexAndPos","__createGlNode","__createAllProgram","__registTouchEvent","pokerHeight","glnode","GLNode","node","_sgNode","addChild","smoothFrame","isCreateNum","draw","__drawByMoveProgram","scale","__drawBySmoothProgram","Math","max","__drawByEndProgram","setTimeout","removeChild","layer","onDestroy","bind","Layer","self","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touch","log","onTouchMoved","location","getLocation","y","touchStartY","min","onTouchEnded","moveVertSource","smoothVertSource","endVertSource","strFragSource","moveGlProgram","__createProgram","smoothGlProgram","endGlProgram","retain","rotationLc","getUniformLocation","ratio","radius","offx","offy","Height","Width","vsource","fsource","glProgram","GLProgram","createWithByteArrays","link","updateUniforms","rotation","gl","enable","CULL_FACE","use","setUniformsForBuiltins","setUniformLocationF32","pokerWidth","bindTexture","TEXTURE_2D","backSpriteId","__drawArrays","backPosBuffer","backTexBuffer","frontSpriteId","frontPosBuffer","frontTexBuffer","disable","pos","tex","enableVertexAttribArray","macro","VERTEX_ATTRIB_POSITION","VERTEX_ATTRIB_TEX_COORDS","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","drawArrays","TRIANGLES","posTexNum","isBack","nDiv","verts","Array","texs","dh","dw","c","x","quad","i","quadX","quadY","numX","numY","push","k","posBuffer","createBuffer","bufferData","Float32Array","STATIC_DRAW","length","texBuffer","buffer_id","imgUrl","url","raw","frontSprite","textureCache","addImage","backSprite","pokerSize","size","height","width","_glID","winSize","_deleteBuffer","release"],"mappings":"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","file":"HelloWorld.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        label: {\n            default: null,\n            type: cc.Label\n        },\n        // defaults, set visually when attaching this script to the Canvas\n        text: 'Hello, World!',\n\n       \n        // frontSprite:{\n        //     default:null,\n        //     type: cc.SpriteFrame\n        // },\n\n\n\n        // backSprite :{\n        //     default:null,\n        //     type: cc.SpriteFrame\n        // }\n\n    },\n\n    onLoad: function () {\n        this.label.string = this.text;\n        this.__initCfg();\n    },\n\n    __initCfg: function () {\n        this.posX = 0;\n        this.posY = 0;\n        this.ratioVal = 0;\n        this.radiusVal = 0;\n        this.szBack = \"resources/poker_beimian.png\";\n        this.szFont = \"resources/poker_10.png\";\n        this.RubCardLayer_State_Move = 0;\n        this.RubCardLayer_State_Smooth = 1;\n        var RubCardLayer_Pai = 3.141592\n        this.RubCardLayer_RotationFrame = 10\n        this.RubCardLayer_RotationAnger = RubCardLayer_Pai/3\n        this.RubCardLayer_SmoothFrame = 10\n        this.RubCardLayer_SmoothAnger = RubCardLayer_Pai/6\n\n        this.state = this.RubCardLayer_State_Move;\n\n        this.__createTextures();\n        this.__initTexAndPos(true);\n        this.__initTexAndPos(false);\n        this.__createGlNode();\n        this.__createAllProgram();\n        this.__registTouchEvent()\n        this.radiusVal = this.pokerHeight/10;\n    },\n\n    __createGlNode:function() {\n        var glnode = new cc.GLNode();\n        this.node._sgNode.addChild(glnode,10);\n        this.glnode = glnode;\n        this.smoothFrame = 1;\n        this.isCreateNum = false;\n\n        glnode.draw = function() {\n            if(this.state == this.RubCardLayer_State_Move){\n                this.__drawByMoveProgram(0);\n            }\n            else if(this.state == this.RubCardLayer_State_Smooth){\n                if(this.smoothFrame <= this.RubCardLayer_RotationFrame)\n                {\n                    this.__drawByMoveProgram(-this.RubCardLayer_RotationAnger*this.smoothFrame/this.RubCardLayer_RotationFrame);\n                }\n                else if(this.smoothFrame < (this.RubCardLayer_RotationFrame+this.RubCardLayer_SmoothFrame)){\n                    var scale = (this.smoothFrame - this.RubCardLayer_RotationFrame)/this.RubCardLayer_SmoothFrame;\n                    this.__drawBySmoothProgram(Math.max(0.01,this.RubCardLayer_SmoothAnger*(1-scale)))\n                }\n                else{\n                    //第一次到这里就铺平了\n                    this.__drawByEndProgram()\n                    if(this.isCreateNum == false){\n                        this.isCreateNum = true\n                        setTimeout(function () {\n                            this.node._sgNode.removeChild(this.glnode);\n                            this.node._sgNode.removeChild(this.layer);\n                            this.onDestroy();\n                        }.bind(this), 1000);\n                    }\n                    \n                }\n                this.smoothFrame = this.smoothFrame + 1\n            }\n        }.bind(this);\n    },\n\n    __registTouchEvent: function(){\n        var layer = new cc.Layer();\n        this.layer = layer\n        this.node._sgNode.addChild(layer,10);\n        var self = this;\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: function(touch, event)\n            {\n                cc.log(\"page view touch onTouchBegan\");\n                return true;\n            },\n            onTouchMoved: function(touch, event){\n                var location = touch.getLocation();\n                self.ratioVal = (location.y-self.touchStartY)/self.pokerHeight;\n                self.ratioVal = Math.max(0, self.ratioVal);\n                self.ratioVal = Math.min(1, self.ratioVal);\n                return true;\n            },\n            onTouchEnded: function(touch, event){\n                cc.log(\"page view touch onTouchEnded\");\n                if(self.ratioVal >= 1)\n                {\n                    self.state = self.RubCardLayer_State_Smooth;\n                }\n            },\n\n        }, layer);\n    },\n\n    __createAllProgram:function() {\n        var moveVertSource = \n        \"attribute vec2 a_position;\\n\"+\n        \"attribute vec2 a_texCoord;\\n\"+\n        \"uniform float ratio; \\n\"+\n        \"uniform float radius; \\n\"+\n        \"uniform float width;\\n\"+\n        \"uniform float height;\\n\"+\n        \"uniform float offx;\\n\"+\n        \"uniform float offy;\\n\"+\n        \"uniform float rotation;\\n\"+\n        \"varying vec2 v_texCoord;\\n\"+\n\n        \"void main()\\n\"+\n        \"{\\n\"+\n        \"   vec4 tmp_pos = vec4(0.0, 0.0, 0.0, 0.0);\\n\"+\n        \"   tmp_pos = vec4(a_position.x, a_position.y, 0.0, 1.0);\\n\"+\n\n        \"   float halfPeri = radius * 3.14159; \\n\"+\n        \"   float hr = height * ratio;\\n\"+\n        \"   if(tmp_pos.x < 0.0 || tmp_pos.x > width || tmp_pos.y < 0.0 || tmp_pos.y > height){\\n\"+\n        \"   tmp_pos.x = 0.0;tmp_pos.y = 0.0;}\\n\"+\n        \"   if(hr > 0.0 && hr <= halfPeri){\\n\"+\n        \"         if(tmp_pos.y < hr){\\n\"+\n        \"               float rad = hr/ 3.14159;\\n\"+\n        \"               float arc = (hr-tmp_pos.y)/rad;\\n\"+\n        \"               tmp_pos.y = hr - sin(arc)*rad;\\n\"+\n        \"               tmp_pos.z = rad * (1.0-cos(arc)); \\n\"+\n        \"          }\\n\"+\n        \"   }\\n\"+\n        \"   if(hr > halfPeri){\\n\"+\n        \"        float straight = (hr - halfPeri)/2.0;\\n\"+\n        \"        if(tmp_pos.y < straight){\\n\"+\n        \"            tmp_pos.y = hr  - tmp_pos.y;\\n\"+\n        \"            tmp_pos.z = radius * 2.0; \\n\"+\n        \"        }\\n\"+\n        \"        else if(tmp_pos.y < (straight + halfPeri)) {\\n\"+\n        \"            float dy = halfPeri - (tmp_pos.y - straight);\\n\"+\n        \"            float arc = dy/radius;\\n\"+\n        \"            tmp_pos.y = hr - straight - sin(arc)*radius;\\n\"+\n        \"            tmp_pos.z = radius * (1.0-cos(arc)); \\n\"+\n        \"        }\\n\"+\n        \"    }\\n\"+\n        \"    float y1 = tmp_pos.y;\\n\"+\n        \"    float z1 = tmp_pos.z;\\n\"+\n        \"    float y2 = height;\\n\"+\n        \"    float z2 = 0.0;\\n\"+\n        \"    float sinRat = sin(rotation);\\n\"+\n        \"    float cosRat = cos(rotation);\\n\"+\n        \"    tmp_pos.y=(y1-y2)*cosRat-(z1-z2)*sinRat+y2;\\n\"+\n        \"    tmp_pos.z=(z1-z2)*cosRat+(y1-y2)*sinRat+z2;\\n\"+\n        \"    tmp_pos.y = tmp_pos.y - height/2.0*(1.0-cosRat);\\n\"+\n        \"    tmp_pos += vec4(offx, offy, 0.0, 0.0);\\n\"+\n        \"    gl_Position = CC_MVPMatrix * tmp_pos;\\n\"+\n        \"    v_texCoord = a_texCoord;\\n\"+\n        \"}\\n\";\n\n        var smoothVertSource = \n        \"attribute vec2 a_position;\\n\"+\n        \"attribute vec2 a_texCoord;\\n\"+\n        \"uniform float width;\\n\"+\n        \"uniform float height;\\n\"+\n        \"uniform float offx;\\n\"+\n        \"uniform float offy;\\n\"+\n        \"uniform float rotation;\\n\"+\n        \"varying vec2 v_texCoord;\\n\"+\n\n        \"void main()\\n\"+\n        \"{\\n\"+\n        \"   vec4 tmp_pos = vec4(0.0, 0.0, 0.0, 0.0);\\n\"+\n        \"   tmp_pos = vec4(a_position.x, a_position.y, 0.0, 1.0);\\n\"+\n        \"    if(tmp_pos.x < 0.0 || tmp_pos.x > width || tmp_pos.y < 0.0 || tmp_pos.y > height){\\n\"+\n        \"    tmp_pos.x = 0.0;tmp_pos.y = 0.0;}\\n\"+\n        \"    float cl = height/5.0;\\n\"+\n        \"    float sl = (height - cl)/2.0;\\n\"+\n        \"    float radii = (cl/rotation)/2.0;\\n\"+\n        \"    float sinRot = sin(rotation);\\n\"+\n        \"    float cosRot = cos(rotation);\\n\"+\n        \"    float distance = radii*sinRot;\\n\"+\n        \"    float centerY = height/2.0;\\n\"+\n        \"    float poxY1 = centerY - distance;\\n\"+\n        \"    float poxY2 = centerY + distance;\\n\"+\n        \"    float posZ = sl*sinRot;\\n\"+\n        \"    if(tmp_pos.y <= sl){\\n\"+\n        \"       float length = sl - tmp_pos.y;\\n\"+\n        \"       tmp_pos.y = poxY1 - length*cosRot;\\n\"+\n        \"       tmp_pos.z = posZ - length*sinRot;\\n\"+\n        \"    }\\n\"+\n        \"    else if(tmp_pos.y < (sl+cl)){\\n\"+\n        \"       float el = tmp_pos.y - sl;\\n\"+\n        \"       float rotation2 = -el/radii;\\n\"+\n        \"       float x1 = poxY1;\\n\"+\n        \"       float y1 = posZ;\\n\"+\n        \"       float x2 = centerY;\\n\"+\n        \"       float y2 = posZ - radii*cosRot;\\n\"+\n        \"       float sinRot2 = sin(rotation2);\\n\"+\n        \"       float cosRot2 = cos(rotation2);\\n\"+\n        \"       tmp_pos.y=(x1-x2)*cosRot2-(y1-y2)*sinRot2+x2;\\n\"+\n        \"       tmp_pos.z=(y1-y2)*cosRot2+(x1-x2)*sinRot2+y2;\\n\"+\n        \"    }\\n\"+\n        \"    else if(tmp_pos.y <= height){\\n\"+\n        \"        float length = tmp_pos.y - cl - sl;\\n\"+\n        \"        tmp_pos.y = poxY2 + length*cosRot;\\n\"+\n        \"        tmp_pos.z = posZ - length*sinRot;\\n\"+\n        \"    }\\n\"+\n        \"    tmp_pos += vec4(offx, offy, 0.0, 0.0);\\n\"+\n        \"    gl_Position = CC_MVPMatrix * tmp_pos;\\n\"+\n        \"    v_texCoord = vec2(a_texCoord.x, 1.0-a_texCoord.y);\\n\"+\n        \"}\\n\";\n\n        var endVertSource = \n        \"\\n\" +\n        \"attribute vec2 a_position;\\n\"+\n        \"attribute vec2 a_texCoord;\\n\"+\n        \"uniform float width;\\n\"+\n        \"uniform float height;\\n\"+\n        \"uniform float offx;\\n\"+\n        \"uniform float offy;\\n\"+\n        \"varying vec2 v_texCoord;\\n\"+\n\n        \"void main()\\n\"+\n        \"{\\n\"+\n        \"   vec4 tmp_pos = vec4(0.0, 0.0, 0.0, 0.0);\\n\"+\n        \"   tmp_pos = vec4(a_position.x, a_position.y, 0.0, 1.0);\\n\"+\n        \"    if(tmp_pos.x < 0.0 || tmp_pos.x > width || tmp_pos.y < 0.0 || tmp_pos.y > height){\\n\"+\n        \"    tmp_pos.x = 0.0;tmp_pos.y = 0.0;}\\n\"+\n        \"    tmp_pos += vec4(offx, offy, 0.0, 0.0);\\n\"+\n        \"    gl_Position = CC_MVPMatrix * tmp_pos;\\n\"+\n        \"    v_texCoord = vec2(a_texCoord.x, 1.0-a_texCoord.y);\\n\"+\n        \"}\\n\";\n\n        var strFragSource =\n        \"varying vec2 v_texCoord;\\n\"+\n        \"void main()\\n\"+\n        \"{\\n\"+\n            \"//TODO, 这里可以做些片段着色特效\\n\"+\n            \"gl_FragColor = texture2D(CC_Texture0, v_texCoord);\\n\"+\n        \"}\\n\";\n\n        var moveGlProgram = this.moveGlProgram = this.__createProgram(moveVertSource, strFragSource);\n        var smoothGlProgram = this.smoothGlProgram = this.__createProgram(smoothVertSource, strFragSource);\n        var endGlProgram = this.endGlProgram = this.__createProgram(endVertSource, strFragSource);\n        this.moveGlProgram.retain();\n        this.smoothGlProgram.retain();\n        this.endGlProgram.retain();\n\n        moveGlProgram.rotationLc = moveGlProgram.getUniformLocation(\"rotation\");\n        moveGlProgram.ratio = moveGlProgram.getUniformLocation(\"ratio\");\n        moveGlProgram.radius = moveGlProgram.getUniformLocation(\"radius\");\n        moveGlProgram.offx = moveGlProgram.getUniformLocation(\"offx\");\n        moveGlProgram.offy = moveGlProgram.getUniformLocation(\"offy\");\n        moveGlProgram.Height = moveGlProgram.getUniformLocation(\"height\");\n        moveGlProgram.Width = moveGlProgram.getUniformLocation(\"width\");\n\n        smoothGlProgram.rotationLc = smoothGlProgram.getUniformLocation(\"rotation\")\n        smoothGlProgram.offx = smoothGlProgram.getUniformLocation(\"offx\")\n        smoothGlProgram.offy = smoothGlProgram.getUniformLocation(\"offy\")\n        smoothGlProgram.Height = smoothGlProgram.getUniformLocation(\"height\")\n        smoothGlProgram.Width = smoothGlProgram.getUniformLocation(\"width\");\n\n        endGlProgram.offx = endGlProgram.getUniformLocation(\"offx\");\n        endGlProgram.offy = endGlProgram.getUniformLocation(\"offy\");\n        endGlProgram.Height = endGlProgram.getUniformLocation(\"height\")\n        endGlProgram.Width = endGlProgram.getUniformLocation(\"width\");\n    },\n\n    __createProgram:function(vsource, fsource) {\n        var glProgram = cc.GLProgram.createWithByteArrays(vsource, fsource)\n        glProgram.link();\n        glProgram.updateUniforms()\n        return glProgram\n    },\n\n    __drawByMoveProgram:function(rotation){\n        var glProgram = this.moveGlProgram;\n        gl.enable(gl.CULL_FACE);\n        glProgram.use();\n        glProgram.setUniformsForBuiltins();\n\n        glProgram.setUniformLocationF32(glProgram.rotationLc, rotation);\n        glProgram.setUniformLocationF32(glProgram.ratio, this.ratioVal);\n        glProgram.setUniformLocationF32(glProgram.radius, this.radiusVal);\n        glProgram.setUniformLocationF32(glProgram.offx, this.offx);\n        glProgram.setUniformLocationF32(glProgram.offy, this.offy);\n        glProgram.setUniformLocationF32(glProgram.Height, this.pokerHeight);\n        glProgram.setUniformLocationF32(glProgram.Width, this.pokerWidth);\n\n        gl.bindTexture(gl.TEXTURE_2D, this.backSpriteId);\n        this.__drawArrays(this.backPosBuffer, this.backTexBuffer);\n        gl.bindTexture(gl.TEXTURE_2D, this.frontSpriteId);\n        this.__drawArrays(this.frontPosBuffer, this.frontTexBuffer);\n        gl.disable(gl.CULL_FACE);\n    },\n\n    __drawBySmoothProgram: function (rotation){\n        var glProgram = this.smoothGlProgram\n        glProgram.use();\n        glProgram.setUniformsForBuiltins();\n\n        gl.bindTexture(gl.TEXTURE_2D, this.frontSpriteId);\n        glProgram.setUniformLocationF32(glProgram.rotationLc, rotation)\n        glProgram.setUniformLocationF32(glProgram.offx, this.offx)\n        glProgram.setUniformLocationF32(glProgram.offy, this.offy)\n        glProgram.setUniformLocationF32(glProgram.Height, this.pokerHeight)\n        glProgram.setUniformLocationF32(glProgram.Width, this.pokerWidth);\n\n        this.__drawArrays(this.frontPosBuffer, this.frontTexBuffer)\n    },\n\n    __drawByEndProgram:function (){\n        var glProgram = this.endGlProgram;\n        glProgram.use();\n        glProgram.setUniformsForBuiltins();\n\n        gl.bindTexture(gl.TEXTURE_2D, this.frontSpriteId);\n        glProgram.setUniformLocationF32(glProgram.offx, this.offx);\n        glProgram.setUniformLocationF32(glProgram.offy, this.offy);\n        glProgram.setUniformLocationF32(glProgram.Height, this.pokerHeight)\n        glProgram.setUniformLocationF32(glProgram.Width, this.pokerWidth);\n        this.__drawArrays(this.frontPosBuffer, this.frontTexBuffer);\n    },\n\n    __drawArrays: function(pos, tex){\n        gl.enableVertexAttribArray(cc.macro.VERTEX_ATTRIB_POSITION);\n        gl.enableVertexAttribArray(cc.macro.VERTEX_ATTRIB_TEX_COORDS);\n        //console.log('gl.FLOAT='+gl.FLOAT);\n        var VERTEX_ATTRIB_POSITION = 0;\n        var VERTEX_ATTRIB_TEX_COORDS = 2;\n        gl.bindBuffer(gl.ARRAY_BUFFER, pos)\n        gl.vertexAttribPointer(VERTEX_ATTRIB_POSITION,2,gl.FLOAT,0,0,0)\n        gl.bindBuffer(gl.ARRAY_BUFFER, tex)\n        gl.vertexAttribPointer(VERTEX_ATTRIB_TEX_COORDS,2,gl.FLOAT,0,0,0)\n        gl.drawArrays(gl.TRIANGLES, 0, this.posTexNum)\n        gl.bindBuffer(gl.ARRAY_BUFFER, 0)\n    },\n\n    __initTexAndPos: function(isBack){\n        var nDiv = 20; //将宽分成100份\n        var verts = new Array(); //位置坐标\n        var texs = new Array(); //纹理坐标\n        var dh = this.pokerHeight/nDiv;\n        var dw = this.pokerWidth;\n\n        //计算顶点位置\n        for(var c = 1; c<=nDiv; c++){\n            var x = 0;\n            var y = (c-1)*dh;\n            var quad = null;\n            if(isBack){\n                quad = new Array(x, y, x+dw, y, x, y+dh, x+dw, y, x+dw, y+dh, x, y+dh);\n            }\n            else{\n                quad = new Array(x, y, x, y+dh, x+dw, y, x+dw, y, x, y+dh, x+dw, y+dh);\n            };\n            for(var i=0; i<=5; i++){\n                var quadX = quad[i*2]\n                var quadY = quad[i*2+1]\n                var numX = 1 - quadY/this.pokerHeight\n                var numY = quadX/this.pokerWidth\n                texs.push(Math.max(0,numX));\n                texs.push(Math.max(0,numY));\n            };\n            for (var k in quad)\n            {\n                verts.push(quad[k]);\n            };\n        }\n\n        var posBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this.posTexNum = verts.length/2;\n\n        var texBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, texBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texs), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        if(isBack)\n        {\n            this.backPosBuffer = posBuffer.buffer_id;\n            this.backTexBuffer = texBuffer.buffer_id;\n        }\n        else{\n            this.frontPosBuffer = posBuffer.buffer_id;\n            this.frontTexBuffer = texBuffer.buffer_id;\n        }\n    },\n\n    __createTextures: function () {\n        var imgUrl = cc.url.raw(this.szFont);\n        this.frontSprite = cc.textureCache.addImage(imgUrl);\n        this.frontSprite.retain();\n\n        imgUrl = cc.url.raw(this.szBack);\n        this.backSprite = cc.textureCache.addImage(imgUrl);\n        this.backSprite.retain();\n\n        var pokerSize = cc.size(314,475)//this.backSprite.getContentSize();\n        this.pokerWidth = pokerSize.height\n        this.pokerHeight = pokerSize.width\n\n        this.offx = this.posX - this.pokerWidth/2;\n        this.offy = this.posY - this.pokerHeight/2;\n        //this.backSpriteId = this.backSprite.getName()\n        //this.frontSpriteId = this.frontSprite.getName()\n        this.backSpriteId = this.backSprite._glID;\n        this.frontSpriteId = this.frontSprite._glID;\n        this.touchStartY = cc.winSize.height/2 + this.posY - this.pokerHeight/2;\n    },\n\n    //结束需要移除\n    onDestroy: function () {\n        gl._deleteBuffer(this.backPosBuffer)\n        gl._deleteBuffer(this.backTexBuffer)\n        gl._deleteBuffer(this.frontPosBuffer)\n        gl._deleteBuffer(this.frontTexBuffer)\n        this.moveGlProgram.release();\n        this.smoothGlProgram.release();\n        this.endGlProgram.release();\n        this.backSprite.release();\n        this.frontSprite.release();\n    },\n});\n\n"]}